{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/blanc/Desktop/lumarVelas/my-app/components/Admin/formProduct.jsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState } from \"react\";\r\nimport supabase from \"../../utils/supabaseClient\";  // Importa el cliente de Supabase\r\nimport Image from \"next\";\r\nconst ProductForm = () => {\r\n  const [name, setName] = useState('');\r\n  const [fragance, setFragance] = useState('');\r\n  const [description, setDescription] = useState('');\r\n  const [price, setPrice] = useState('');\r\n  const [image, setImage] = useState(null);  // Imagen principal\r\n  const [image1, setImage1] = useState(null); // Imagen secundaria\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [imagePublicUrl, setImagePublicUrl] = useState(null);\r\n  const [image1PublicUrl, setImage1PublicUrl] = useState(null);\r\n\r\n  // Función para manejar el cambio de la imagen principal\r\n  const handleImageChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      setImage(file);\r\n    }\r\n  };\r\n\r\n  // Función para manejar el cambio de la imagen secundaria\r\n  const handleImage1Change = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      setImage1(file);\r\n    }\r\n  };\r\n\r\n  // Función para subir una imagen a Supabase Storage y obtener la URL pública\r\n  const uploadImageToSupabase = async (file, folder) => {\r\n    const { data, error } = await supabase.storage\r\n      .from(folder)\r\n      .upload(`${Date.now()}-${file.name}`, file);\r\n\r\n    if (error) {\r\n      throw error;\r\n    }\r\n\r\n    // Obtener la URL pública del archivo cargado\r\n    const publicURL = supabase.storage\r\n      .from(folder)\r\n      .getPublicUrl(data.path).publicURL;\r\n\r\n    return publicURL;\r\n  };\r\n\r\n  // Función para manejar el envío del formulario\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!name || !fragance || !price || !image || !image1) {\r\n      setError('Por favor completa todos los campos.');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      // Subir las imágenes a Supabase y obtener las URLs públicas\r\n      const imageUrl = await uploadImageToSupabase(image, 'products');  // Imagen principal\r\n      const image1Url = await uploadImageToSupabase(image1, 'products');  // Imagen secundaria\r\n\r\n      setImagePublicUrl(imageUrl);\r\n      setImage1PublicUrl(image1Url);\r\n\r\n      // Guardar el producto en la base de datos de Supabase\r\n      const { data, error } = await supabase\r\n        .from(\"products\")\r\n        .insert([\r\n          { \r\n            name, \r\n            fragance, \r\n            description, \r\n            price, \r\n            image_url: imageUrl, \r\n            image1_url: image1Url \r\n          }\r\n        ]);\r\n\r\n      if (error) {\r\n        throw error;\r\n      }\r\n\r\n      // Limpiar el formulario\r\n      setName('');\r\n      setFragance('');\r\n      setDescription('');\r\n      setPrice('');\r\n      setImage(null);\r\n      setImage1(null);\r\n\r\n      alert('Producto creado con éxito!');\r\n    } catch (err) {\r\n      setError('Error al crear el producto: ' + err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-lg mx-auto p-6 bg-white border rounded-lg shadow-md\">\r\n      <h2 className=\"text-2xl font-semibold mb-4\">Crear Producto</h2>\r\n      {error && <p className=\"text-red-500 mb-4\">{error}</p>}\r\n\r\n      <form onSubmit={handleSubmit}>\r\n        <div className=\"mb-4\">\r\n          <label htmlFor=\"name\" className=\"block text-sm font-medium text-gray-700\">\r\n            Nombre del Producto\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"name\"\r\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500\"\r\n            value={name}\r\n            onChange={(e) => setName(e.target.value)}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"mb-4\">\r\n          <label htmlFor=\"fragance\" className=\"block text-sm font-medium text-gray-700\">\r\n            Fragancia\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"fragance\"\r\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500\"\r\n            value={fragance}\r\n            onChange={(e) => setFragance(e.target.value)}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"mb-4\">\r\n          <label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700\">\r\n            Descripción\r\n          </label>\r\n          <textarea\r\n            id=\"description\"\r\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500\"\r\n            value={description}\r\n            onChange={(e) => setDescription(e.target.value)}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"mb-4\">\r\n          <label htmlFor=\"price\" className=\"block text-sm font-medium text-gray-700\">\r\n            Precio\r\n          </label>\r\n          <input\r\n            type=\"number\"\r\n            id=\"price\"\r\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500\"\r\n            value={price}\r\n            onChange={(e) => setPrice(e.target.value)}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"mb-4\">\r\n          <label htmlFor=\"image\" className=\"block text-sm font-medium text-gray-700\">\r\n            Imagen del Producto (Principal)\r\n          </label>\r\n          <input\r\n            type=\"file\"\r\n            id=\"image\"\r\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500\"\r\n            onChange={handleImageChange}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"mb-4\">\r\n          <label htmlFor=\"image1\" className=\"block text-sm font-medium text-gray-700\">\r\n            Imagen del Producto (Secundaria)\r\n          </label>\r\n          <input\r\n            type=\"file\"\r\n            id=\"image1\"\r\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500\"\r\n            onChange={handleImage1Change}\r\n          />\r\n        </div>\r\n\r\n        <button\r\n          type=\"submit\"\r\n          className=\"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\r\n          disabled={loading}\r\n        >\r\n          {loading ? 'Cargando...' : 'Crear Producto'}\r\n        </button>\r\n      </form>\r\n\r\n      {imagePublicUrl && image1PublicUrl && (\r\n        <div className=\"mt-4\">\r\n          <h3 className=\"text-lg font-semibold\">Imágenes cargadas:</h3>\r\n          <div className=\"flex space-x-4\">\r\n            <Image src={imagePublicUrl} alt=\"Imagen del producto principal\" className=\"w-32 h-32 object-cover\" />\r\n            <Image src={image1PublicUrl} alt=\"Imagen del producto secundaria\" className=\"w-32 h-32 object-cover\" />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductForm;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 366, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}