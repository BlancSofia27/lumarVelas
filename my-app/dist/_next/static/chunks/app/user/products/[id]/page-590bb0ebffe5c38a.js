(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[689],{9965:(e,t,r)=>{Promise.resolve().then(r.bind(r,4660))},4660:(e,t,r)=>{"use strict";r.d(t,{default:()=>d});var a=r(7437),s=r(2265),i=r(6648),l=r(7880),n=r(1444),c=r(3990),o=r(5956);function d(e){let{id:t}=e,[r,d]=(0,s.useState)(null),[m,p]=(0,s.useState)([]),[x,u]=(0,s.useState)([]),[h,f]=(0,s.useState)(null),[g,y]=(0,s.useState)(null),b=(0,n.I0)(),j=async()=>{if(t)try{let{data:e,error:r}=await l.O.from("products").select("*").eq("id",t).single();if(r)throw r;d(e),N(e.fragance),v(e.next_fragance)}catch(e){console.error("Error al obtener el producto:",e)}},N=async e=>{try{if(!e||0===e.length)return;let{data:t,error:r}=await l.O.from("fragances").select("id, name, description, color, intensity").in("id",e);if(r)throw r;p(t)}catch(e){console.error("Error al obtener las fragancias:",e)}},v=async e=>{try{if(!e||0===e.length)return;let{data:t,error:r}=await l.O.from("fragances").select("id, name, description, color, intensity").in("id",e);if(r)throw r;u(t)}catch(e){console.error("Error al obtener las fragancias proximas:",e)}};if((0,s.useEffect)(()=>{j()},[t]),!r)return(0,a.jsx)("p",{children:"Cargando producto..."});let w=()=>r.old_price&&r.old_price>0?Math.round((r.old_price-r.price)/r.old_price*100):0;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"max-w-4xl mx-auto py-8 px-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"w-full relative group",children:[(0,a.jsx)(i.default,{src:r.image_url,alt:r.name,priority:!0,width:400,height:600,className:"w-full h-[300px] md:h-[350px] lg:h-[400px] rounded-md object-cover transition-opacity duration-300 group-hover:opacity-0"}),(0,a.jsx)(i.default,{src:r.image1_url,alt:r.name,priority:!0,width:400,height:600,className:"w-full h-[300px] md:h-[350px] lg:h-[400px] rounded-md object-cover absolute top-0 left-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:r.name}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:r.description}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsxs)("span",{className:"text-2xl font-semibold text-black mr-1",children:["$",r.price]}),r.old_price&&r.old_price!==r.price&&(0,a.jsxs)("span",{className:"text-md text-gray-500 line-through",children:["$",r.old_price]}),r.old_price&&(0,a.jsx)("span",{className:"text-xl text-red-600 ml-2",children:0!==w()?"".concat(w(),"% OFF"):null})]}),r.promotional_price&&(0,a.jsx)("div",{className:"text-sm text-green-600 font-semibold",children:(0,a.jsxs)("p",{className:"text-lg text-gray-600",children:["$",r.promotional_price," Pagando en efectivo o transferencia"]})}),m.length>0||x.length>0?(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Fragancias:"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-3 gap-1",children:[m.map(e=>(0,a.jsx)("button",{onClick:()=>{f(e),y(null)},className:"flex flex-col items-center justify-center py-2 px-5 rounded-lg border-2 border-gray-300 w-max",style:{backgroundColor:e.color},children:(0,a.jsx)("span",{className:"text-white font-semibold",children:e.name})},e.id)),x.map(e=>(0,a.jsx)("button",{onClick:()=>{y(e),f(null)},className:"flex flex-col items-center justify-center py-2 px-5 rounded-lg border-2 border-gray-300 opacity-70 cursor-not-allowed w-max",style:{backgroundColor:e.color},children:(0,a.jsx)("span",{className:"text-white font-semibold",children:e.name})},e.id))]})]}):null,(0,a.jsx)("button",{onClick:()=>{if(!r)return;if(!h&&!g){o.Am.error("Por favor, selecciona una fragancia disponible.");return}let e={id:r.id,name:r.name,price:r.price,img:r.image_url,fragance:h.name?h.name:g.name,quantity:1};b((0,c.dm)(e)),o.Am.success("".concat(r.name," a\xf1adido al carrito"))},className:"mt-6 bg-green-500 text-white px-6 py-2 rounded-lg",children:"A\xf1adir al carrito"})]})]})}),(h||g)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mt-4 p-4 border-t-2 border-gray-300 max-w-xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center mb-4",children:[(0,a.jsx)("label",{className:"mr-2 text-sm font-medium text-gray-700",children:"Intensidad:"}),(0,a.jsx)("div",{className:"flex gap-1",children:(h||g).intensity&&Array.from({length:5}).map((e,t)=>(0,a.jsx)("span",{className:"w-3 h-3 rounded-full ".concat(t<(h||g).intensity?"bg-black":"bg-gray-300")},t))})]}),(0,a.jsx)("h3",{className:"text-lg font-bold",children:(h||g).name}),(0,a.jsx)("p",{className:"text-gray-600",children:(h||g).description})]}),g&&(0,a.jsx)("div",{className:"text-center text-sm text-gray-600 font-semibold mb-4",children:"Pr\xf3ximamente disponible"})]})]})}},3990:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>i,dm:()=>s});let a=(0,r(6862).oM)({name:"cart",initialState:{items:[],total:0},reducers:{addItemToCart:(e,t)=>{let r=e.items.find(e=>e.id===t.payload.id);r?r.quantity+=1:e.items.push({...t.payload,quantity:1}),e.total+=t.payload.price}}}),{addItemToCart:s}=a.actions,i=a.reducer},7880:(e,t,r)=>{"use strict";r.d(t,{O:()=>l});var a=r(4593);let s="https://hngtcilvtlfttimesspf.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhuZ3RjaWx2dGxmdHRpbWVzc3BmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzUzMDIyODgsImV4cCI6MjA1MDg3ODI4OH0.QI4AB25s9Uc5t1Oc4C9Lgo0R6n9LmbkNXOfJ4Jfh2gg";if(!s||!i)throw Error("Supabase URL and Key are required");let l=(0,a.eI)(s,i)},4839:(e,t,r)=>{"use strict";function a(){for(var e,t,r=0,a="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=function e(t){var r,a,s="";if("string"==typeof t||"number"==typeof t)s+=t;else if("object"==typeof t){if(Array.isArray(t)){var i=t.length;for(r=0;r<i;r++)t[r]&&(a=e(t[r]))&&(s&&(s+=" "),s+=a)}else for(a in t)t[a]&&(s&&(s+=" "),s+=a)}return s}(e))&&(a&&(a+=" "),a+=t);return a}r.d(t,{W:()=>a,Z:()=>s});let s=a}},e=>{var t=t=>e(e.s=t);e.O(0,[648,593,444,862,956,130,215,744],()=>t(9965)),_N_E=e.O()}]);