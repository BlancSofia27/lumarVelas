(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[992],{6858:(e,t,l)=>{Promise.resolve().then(l.bind(l,8067))},8067:(e,t,l)=>{"use strict";l.d(t,{default:()=>n});var a=l(7437),r=l(2265),i=l(7880),s=l(4379),o=l.n(s);let n=()=>{let[e,t]=(0,r.useState)(""),[l,s]=(0,r.useState)([]),[n,c]=(0,r.useState)([]),[u,d]=(0,r.useState)([]),[m,g]=(0,r.useState)(""),[f,b]=(0,r.useState)(""),[x,p]=(0,r.useState)(""),[h,y]=(0,r.useState)(""),[N,j]=(0,r.useState)(null),[v,w]=(0,r.useState)(null),[I,C]=(0,r.useState)(!1),[P,k]=(0,r.useState)("");(0,r.useEffect)(()=>{(async()=>{let{data:e,error:t}=await i.O.from("fragances").select("*");t?console.error("Error al cargar las fragancias:",t):s(e)})()},[]);let S=async(e,t)=>{try{let{data:l,error:a}=await i.O.storage.from(t).upload("".concat(Date.now(),"-").concat(e.name),e);if(a)throw console.error("Error al subir la imagen:",a),a;let r=i.O.storage.from("products").getPublicUrl(l.path);return setImagePublicUrl(r.publicURL),r.data.publicUrl}catch(e){throw console.error("Error al obtener la URL p\xfablica:",e),e}},O=async l=>{if(l.preventDefault(),!e||!n.length||!f||!N||!v){k("Por favor completa todos los campos.");return}C(!0),k("");try{let l=await S(N,"products"),a=await S(v,"products");setImagePublicUrl(l),setImage1PublicUrl(a);let{error:r}=await i.O.from("products").insert([{name:e,fragance:n,next_fragance:u,description:m,price:f,promotional_price:x,old_price:h,image_url:l,image1_url:a}]);if(r)throw r;t(""),c([]),d([]),g(""),b(""),p(""),y(""),j(null),w(null),o().fire({title:"\xa1Producto creado con \xe9xito!",text:"El producto ha sido agregado correctamente.",icon:"success",confirmButtonText:"Aceptar"})}catch(e){k("Error al crear el producto: "+e.message)}finally{C(!1)}},F=e=>{c(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},E=e=>{d(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,a.jsxs)("div",{className:"max-w-lg mx-auto p-6 bg-white border rounded-lg shadow-md",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Crear Producto"}),P&&(0,a.jsx)("p",{className:"text-red-500 mb-4",children:P}),(0,a.jsxs)("form",{onSubmit:O,children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nombre del Producto"}),(0,a.jsx)("input",{type:"text",id:"name",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",value:e,onChange:e=>t(e.target.value)})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"fragance",className:"block text-sm font-medium text-gray-700",children:"Fragancias Disponibles"}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:l.map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>F(e.id),className:"p-2 rounded-lg text-white ".concat(n.includes(e.id)?"bg-blue-500 border-2 border-green-500":"bg-gray-500"),style:{backgroundColor:e.color},children:e.name},e.id))})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"nextFragance",className:"block text-sm font-medium text-gray-700",children:"Fragancias Proximamente Disponibles"}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:l.map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>E(e.id),className:"p-2 rounded-lg text-white ".concat(u.includes(e.id)?"bg-green-500 border-2 border-green-500":"bg-gray-500"),style:{backgroundColor:e.color},children:e.name},e.id))})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700",children:"Precio Actual"}),(0,a.jsx)("input",{type:"number",id:"price",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",value:f,onChange:e=>b(e.target.value)})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"promotionalPrice",className:"block text-sm font-medium text-gray-700",children:"Precio Promocional con efectivo o tranferencia"}),(0,a.jsx)("input",{type:"number",id:"promotionalPrice",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",value:x,onChange:e=>p(e.target.value)})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"oldPrice",className:"block text-sm font-medium text-gray-700",children:"Precio Anterior/tachado"}),(0,a.jsx)("input",{type:"number",id:"oldPrice",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",value:h,onChange:e=>y(e.target.value)})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Descripci\xf3n"}),(0,a.jsx)("textarea",{id:"description",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",value:m,onChange:e=>g(e.target.value)})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"image",className:"block text-sm font-medium text-gray-700",children:"Imagen Principal"}),(0,a.jsx)("input",{type:"file",id:"image",accept:"image/*",onChange:e=>{let t=e.target.files[0];t&&j(t)},className:"w-full text-sm text-gray-700 file:bg-blue-500 file:text-white file:py-2 file:px-4 file:rounded-lg file:focus:outline-none file:focus:ring-2 file:focus:ring-indigo-500"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"image1",className:"block text-sm font-medium text-gray-700",children:"Imagen Secundaria"}),(0,a.jsx)("input",{type:"file",id:"image1",accept:"image/*",onChange:e=>{let t=e.target.files[0];t&&w(t)},className:"w-full text-sm text-gray-700 file:bg-blue-500 file:text-white file:py-2 file:px-4 file:rounded-lg file:focus:outline-none file:focus:ring-2 file:focus:ring-indigo-500"})]}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",disabled:I,children:I?"Cargando...":"Crear Producto"})]})]})}},7880:(e,t,l)=>{"use strict";l.d(t,{O:()=>s});var a=l(4593);let r="https://hngtcilvtlfttimesspf.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhuZ3RjaWx2dGxmdHRpbWVzc3BmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzUzMDIyODgsImV4cCI6MjA1MDg3ODI4OH0.QI4AB25s9Uc5t1Oc4C9Lgo0R6n9LmbkNXOfJ4Jfh2gg";if(!r||!i)throw Error("Supabase URL and Key are required");let s=(0,a.eI)(r,i)}},e=>{var t=t=>e(e.s=t);e.O(0,[461,593,130,215,744],()=>t(6858)),_N_E=e.O()}]);