(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[992],{6858:(e,l,r)=>{Promise.resolve().then(r.bind(r,8067))},8067:(e,l,r)=>{"use strict";r.d(l,{default:()=>n});var t=r(7437),a=r(2265),o=r(7880),s=r(4379),i=r.n(s);let n=()=>{let[e,l]=(0,a.useState)(""),[r,s]=(0,a.useState)([]),[n,c]=(0,a.useState)([]),[d,u]=(0,a.useState)([]),[m,g]=(0,a.useState)(""),[b,f]=(0,a.useState)(""),[x,p]=(0,a.useState)(""),[h,y]=(0,a.useState)(""),[N,j]=(0,a.useState)(null),[v,w]=(0,a.useState)(null),[I,S]=(0,a.useState)(!1),[k,C]=(0,a.useState)(""),[P,E]=(0,a.useState)(null),[O,F]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{let{data:e,error:l}=await o.O.from("fragances").select("*");l?console.error("Error al cargar las fragancias:",l):s(e)})()},[]);let _=async(e,l)=>{try{if(!e)throw Error("No se seleccion\xf3 un archivo para subir.");let r="".concat(Date.now(),"_").concat(e.name),{data:t,error:a}=await o.O.storage.from(l).upload(r,e);if(a)throw console.error("Error al subir la imagen:",a.message),Error("Error al subir la imagen a Supabase.");let s=o.O.storage.from("products").getPublicUrl(t.path);console.log(t.path);let i=s.data.publicUrl;return console.log(s),console.log(i),i}catch(e){throw console.error("Error en uploadImageToSupabase:",e.message),e}},J=async r=>{if(r.preventDefault(),!e||!n.length||!b||!N||!v){C("Por favor completa todos los campos.");return}S(!0),C("");try{let r=await _(N,"products"),t=await _(v,"products");if(!r||!t)throw Error("Error al obtener las URLs de las im\xe1genes.");E(r),F(t);let{error:a}=await o.O.from("products").insert([{name:e,fragance:n,next_fragance:d,description:m,price:b,promotional_price:x||null,old_price:h||null,image_url:P,image1_url:O}]);if(console.log(n,d),a)throw a;l(""),c([]),u([]),g(""),f(""),p(""),y(""),j(null),w(null),i().fire({title:"\xa1Producto creado con \xe9xito!",text:"El producto ha sido agregado correctamente.",icon:"success",confirmButtonText:"Aceptar"})}catch(e){console.error("Error al crear el producto:",e.message),C("Error al crear el producto: "+e.message)}finally{S(!1)}},D=e=>{c(l=>l.includes(e)?l.filter(l=>l!==e):[...l,e])},U=e=>{u(l=>l.includes(e)?l.filter(l=>l!==e):[...l,e])};return(0,t.jsxs)("div",{className:"max-w-lg mx-auto p-6 bg-white border rounded-lg shadow-md",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Crear Producto"}),k&&(0,t.jsx)("p",{className:"text-red-500 mb-4",children:k}),(0,t.jsxs)("form",{onSubmit:J,children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nombre del Producto"}),(0,t.jsx)("input",{type:"text",id:"name",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",value:e,onChange:e=>l(e.target.value)})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{htmlFor:"fragance",className:"block text-sm font-medium text-gray-700",children:"Fragancias Disponibles"}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2",children:r.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>D(e.id),className:"p-2 rounded-lg text-white ".concat(n.includes(e.id)?"bg-blue-500 border-2 border-green-500":"bg-gray-500"),style:{backgroundColor:e.color},children:e.name},e.id))})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{htmlFor:"nextFragance",className:"block text-sm font-medium text-gray-700",children:"Fragancias Proximamente Disponibles"}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2",children:r.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>U(e.id),className:"p-2 rounded-lg text-white ".concat(d.includes(e.id)?"bg-green-500 border-2 border-green-500":"bg-gray-500"),style:{backgroundColor:e.color},children:e.name},e.id))})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700",children:"Precio Actual"}),(0,t.jsx)("input",{type:"number",id:"price",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",value:b,onChange:e=>f(e.target.value)})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{htmlFor:"promotionalPrice",className:"block text-sm font-medium text-gray-700",children:"Precio Promocional con efectivo o tranferencia"}),(0,t.jsx)("input",{type:"number",id:"promotionalPrice",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",value:x,onChange:e=>p(e.target.value)})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{htmlFor:"oldPrice",className:"block text-sm font-medium text-gray-700",children:"Precio Anterior"}),(0,t.jsx)("input",{type:"number",id:"oldPrice",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",value:h,onChange:e=>y(e.target.value)})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{htmlFor:"image",className:"block text-sm font-medium text-gray-700",children:"Imagen Principal"}),(0,t.jsx)("input",{type:"file",id:"image",onChange:e=>{let l=e.target.files[0];l&&j(l)},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-xl file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{htmlFor:"image1",className:"block text-sm font-medium text-gray-700",children:"Imagen Secundaria"}),(0,t.jsx)("input",{type:"file",id:"image1",onChange:e=>{let l=e.target.files[0];l&&w(l)},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-xl file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)("button",{type:"submit",className:"w-full py-2 px-4 rounded-lg text-white ".concat(I?"bg-gray-500":"bg-blue-500"),disabled:I,children:I?"Creando Producto...":"Crear Producto"})})]})]})}},7880:(e,l,r)=>{"use strict";r.d(l,{O:()=>s});var t=r(4593);let a="https://hngtcilvtlfttimesspf.supabase.co",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhuZ3RjaWx2dGxmdHRpbWVzc3BmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzUzMDIyODgsImV4cCI6MjA1MDg3ODI4OH0.QI4AB25s9Uc5t1Oc4C9Lgo0R6n9LmbkNXOfJ4Jfh2gg";if(!a||!o)throw Error("Supabase URL and Key are required");let s=(0,t.eI)(a,o)}},e=>{var l=l=>e(e.s=l);e.O(0,[461,593,130,215,744],()=>l(6858)),_N_E=e.O()}]);